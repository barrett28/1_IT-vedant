{% extends "core/base.html" %} {% load static %} {% block content %}

<div class="main">
  <div class="viewcart_title">
    <h1>{{request.user}} Cart</h1>
  </div>
  {% for item in cart_items %}

  <div id="view_box">
    <div class="main-viewbox">
      <div class="viewcart-image">
        <img
          src="{{ item.product.luggage_image.url }}"
          alt="luggae cart image"
        />
      </div>

      <div class="viewcart-name">
        <h3>{{item.product.name}}</h3>
      </div>

      <div class="dec-counter">
        <a href="{% url "del_quantity" item.id %}"><i class="fa-solid fa-minus"></i></a>
      </div>

      <div class="qunatity_item">{{item.quantity}}</div>

      <div class="add-counter">
        <a href="{% url "add_quantity" item.id %}"><i class="fa-solid fa-plus"></i></a>
      </div>

      <div class="viewcart-price">
        <h5><strong>&#8377;{{item.price_and_quantity_total}}</strong></h5>
      </div>

      <div class="delete_icon">
        <a href="{% url "deletecartitem" item.id %}"><i class="fa-solid fa-trash"></i></a>
      </div>
    </div>
  </div>
  {% endfor %}

  <br>


  <div class="order-summary">
    <h2>Order Summary</h2>
    <table class="summary-table">
        <thead>
            <tr>
                <th>Product Name</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            {% for item in cart_items %}
            <tr>
                <td>{{ item.product.name }}</td>
                <td>₹{{ item.product.discounted_price }}</td>
                <td>{{ item.quantity }}</td>
                <td>₹{{item.price_and_quantity_total}}</td>
            </tr>
            {% endfor %}
            <tr>
                <td colspan="3" class="text-right"><strong>Subtotal</strong></td>
                <td>₹{{ total }}</td>
            </tr>
            <tr>
                <td colspan="3" class="text-right"><strong>Shipping</strong></td>
                <td>₹200</td>
            </tr>
            <tr>
                <td colspan="3" class="text-right"><strong>Final Total</strong></td>
                <td><b>₹{{ final_price }}</b></td>
            </tr>
        </tbody>
    </table>
</div>

<br>


  <div class="pay-button">
    <a href="{% url "checkout" %}"><button class="pay_button">Check Out</button></a>
  </div>
</div>

{% endblock content %}
